From 7afa13497e94e87d81119f94dbb3d7a82ee5df7a Mon Sep 17 00:00:00 2001
From: Fabian Thomas <fabian@fabianthomas.de>
Date: Fri, 12 May 2023 23:17:23 +0200
Subject: add-annotation-right-click.patch

---
 shell/evince-menus.ui | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/shell/evince-menus.ui b/shell/evince-menus.ui
index 11ba15ca..3888f009 100644
--- a/shell/evince-menus.ui
+++ b/shell/evince-menus.ui
@@ -111,6 +111,11 @@
         <attribute name="action">win.annotate-selected-text</attribute>
         <attribute name='hidden-when'>action-disabled</attribute>
       </item>
+      <item>
+        <attribute name="label" translatable="yes">_Add Annotation</attribute>
+        <attribute name="action">win.add-annotation</attribute>
+        <attribute name='hidden-when'>action-disabled</attribute>
+      </item>
       <item>
         <attribute name="label" translatable="yes">Open Containing _Folder</attribute>
         <attribute name="action">win.open-containing-folder</attribute>
-- 
2.40.1

diff --git a/shell/ev-window.c b/shell/ev-window.c
index 8dafb548..2d32874d 100644
--- a/shell/ev-window.c
+++ b/shell/ev-window.c
@@ -6416,7 +6416,7 @@ static const GActionEntry actions[] = {
 	{ "toggle-menu", ev_window_cmd_action_menu },
 	{ "toggle-menubar", ev_window_cmd_action_menubar },
 	{ "caret-navigation", NULL, NULL, "false", ev_window_cmd_view_toggle_caret_navigation },
-	{ "add-annotation", NULL, NULL, "false", ev_window_cmd_add_annotation },
+	{ "add-annotation", ev_window_cmd_add_annotation },
 	{ "web-search", ev_window_cmd_web_search },
 	{ "highlight-annotation", NULL, NULL, "false", ev_window_cmd_add_highlight_annotation },
 	{ "toggle-edit-annots", NULL, NULL, "false", ev_window_cmd_toggle_edit_annots },
